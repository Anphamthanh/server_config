#cloud-config

package_upgrade: true

packages:
  - git
  - vim
  - unzip
  - htop
  - python-pip

runcmd:
  
  # Installing Chef Client
  - mkdir -p /opt/git-repos
  - echo '/usr/bin/git-shell' >> /etc/shells
  - sed -i -e '/^PermitRootLogin/s/^.*$/PermitRootLogin no/' /etc/ssh/sshd_config
  - echo 'PasswordAuthentication no' >> /etc/ssh/sshd_config
  - echo 'ChallengeResponseAuthentication no' >> /etc/ssh/sshd_config
  - restart ssh

users:
      
  - name: deployer
    groups: sudo
    shell: /bin/bash
    sudo: ['ALL=(ALL) NOPASSWD:ALL']
    ssh-authorized-keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCylogXfy6rtYGmhsdQhKQfmj/9MWKcFIwNL64CRF4pHei23oB2wmiMIjTV8Sy6L1eXOsIiIgwKWu/+PmkBsBXMLNwgZrnjCgnPLivLqxqHCDug8sxvTFmYeZyBPBkanJDigegXf03np2E9ZcdlZdC+PJkJbHCOj3Rbuyxsq8TTmLHZ6TUFpAiD6gfNe8BlxgHi4FLeC7BugNN+ynUPszn4afG8ugpwyGACHVBZVfF1t8FaF2H2Zlj7cymhPQmTwUECum44HhW+5kt2qIueF2jaISJJDHCXgWEuhP7GXG8wExz3LV0a4QNW2omCcDigBBwz0VWpNpRgSrKL8K0Nlc5n anpham@AnPham-WorkStation

  - name: git
    shell: /usr/bin/git-shell
    ssh-authorized-keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCylogXfy6rtYGmhsdQhKQfmj/9MWKcFIwNL64CRF4pHei23oB2wmiMIjTV8Sy6L1eXOsIiIgwKWu/+PmkBsBXMLNwgZrnjCgnPLivLqxqHCDug8sxvTFmYeZyBPBkanJDigegXf03np2E9ZcdlZdC+PJkJbHCOj3Rbuyxsq8TTmLHZ6TUFpAiD6gfNe8BlxgHi4FLeC7BugNN+ynUPszn4afG8ugpwyGACHVBZVfF1t8FaF2H2Zlj7cymhPQmTwUECum44HhW+5kt2qIueF2jaISJJDHCXgWEuhP7GXG8wExz3LV0a4QNW2omCcDigBBwz0VWpNpRgSrKL8K0Nlc5n anpham@AnPham-WorkStation


